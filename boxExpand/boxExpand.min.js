/**
 * boxExpand v1.0 - https://github.com/kaaaaeeee/boxExpand
 * Copyright (c) Copyright (c) 2019 kae kobayashi
 * This software is released under the MIT License.
 * http://opensource.org/licenses/mit-license.php
*/
(function(){var c="boxExpand";var b=window.expand||{};b=function(h,i){var d=this;d.defaults={closeHeight:"0px",isScrollAnimation:false,callback:{initializeAfter:null,showAfter:null,hideAfter:null,scrollAfter:null},type:{content:"default",trigger:"default"},showClass:"boxExpand-show",openClass:"boxExpand-open",contentCloakClass:"boxExpand-cloak",contentFadeoutClass:"boxExpand-contents-fadeout",triggerArrowClass:"boxExpand-trigger-arrow"};d.initials={$trigger:h.find(".boxExpand-trigger"),$triggerText:h.find(".boxExpand-triggerText"),$contents:h.find(".boxExpand-contents"),$cloak:null,isShow:false,triggerTextData:{show:"",hide:""}};d.options=$.extend(true,d.defaults,i,d.initials);d.$expand=h;var f=d.options;var e=f.$triggerText.text();var g=(function(){var j=f.$triggerText.attr(c+"-toggle-text");if(j!==undefined&&j!==""){return j}else{return e}})();f.$contents.wrap('<div class="'+f.contentCloakClass+'"></div>');f.$cloak=h.find("."+f.contentCloakClass);if(h.hasClass(f.showClass)){f.isShow=true;f.triggerTextData.show=e;f.triggerTextData.hide=g}else{f.isShow=false;f.triggerTextData.hide=e;f.triggerTextData.show=g;f.$cloak.css("height",f.closeHeight)}d.initialize();return d};b.prototype.initialize=function(){var d=this;var e=d.options;var f=d.$expand;if(e.type.content==="fadeout"){f.toggleClass(e.contentFadeoutClass,true)}if(e.type.trigger==="arrow"){f.toggleClass(e.triggerArrowClass,true)}e.$trigger.on("click."+c,function(g){g.preventDefault();if(e.isShow){d.closeBox()}else{d.openBox()}});d.activeCallback("initializeAfter");f.trigger("boxExpandInit",[d])};b.prototype.openBox=function(){var d=this;var f=d.$expand;var e=d.options;if(e.isShow){return}var g=e.$contents.outerHeight();f.toggleClass(e.openClass,true);e.$cloak.css("height",g).on("transitionend."+c+" webkitTransitionEnd."+c,function(){d.textChange(e.isShow);$(this).off("transitionend."+c+" webkitTransitionEnd."+c);$(this).css("height","");f.toggleClass(e.openClass,false);f.toggleClass(e.showClass,true);e.isShow=true;d.activeCallback("showAfter");f.trigger("boxExpandShow",[d])})};b.prototype.closeBox=function(){var e=this;var g=e.$expand;var f=e.options;if(!f.isShow){return}var h=f.$contents.outerHeight();var d=g.offset().top+($(window).height()/2);g.toggleClass(f.showClass,false);f.$cloak.css("height",h).delay(50).queue(function(){e.textChange(f.isShow);f.$cloak.css("height",f.closeHeight).dequeue();f.isShow=false;e.activeCallback("hideAfter");g.trigger("boxExpandHide",[e])});if(f.isScrollAnimation){d=g.offset().top+a(e)-($(window).height()/2);if(d<0){d=0}$("html, body").stop().animate({scrollTop:d},300,function(){e.activeCallback("scrollAfter");g.trigger("boxExpandScroll",[e])})}};b.prototype.textChange=function(e){var d=this;var f=d.options;if(e){f.$triggerText.text(f.triggerTextData.hide)}else{f.$triggerText.text(f.triggerTextData.show)}};b.prototype.activeCallback=function(f){var d=this;var e=d.options;if(typeof e.callback[f]==="function"){e.callback[f]()}};b.prototype.destroy=function(){var d=this;var f=d.$expand;var e=d.options;f.toggleClass(e.showClass,false);f.toggleClass(e.contentFadeoutClass,false);f.toggleClass(e.triggerArrowClass,false);e.$trigger.off("click."+c);e.$cloak.off("transitionend."+c+" webkitTransitionEnd."+c);$(e.$contents).unwrap('<div class="'+e.contentCloakClass+'"></div>');f.removeData(c)};function a(d){var h=d.$expand;var e=d.options;var f=$('<div class=".'+e.contentCloakClass+'"></div>');f.css({position:"absolute",top:"-9999px",left:"-9999px",height:e.closeHeight,"z-index":-1});f.appendTo(h);var g=f.outerHeight();f.remove();return g}$.fn[c]=function(){var e=this,j=arguments[0],g=Array.prototype.slice.call(arguments,1),d=e.length,h,f;for(h=0;h<d;h++){if(typeof j=="object"||typeof j=="undefined"){e[h][c]=new b($(this),j)}else{f=e[h][c][j].apply(e[h][c],g);if(typeof f!="undefined"){return f}}}return e}})();
